<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>CKEditor 5 – Docflow build</title>
  <style>
    body {
      max-width: 800px;
      margin: 20px auto;
    }

    .ck.ck-editor__editable.ck-blurred {
      border: 1px solid var(--ck-color-base-border);
    }

  </style>
</head>

<body>
  <h1>CKEditor 5 – Docflow build</h1>

  <div id="editor">
    <p style="margin-left:0px;">Lorem {{ipsum}}
      dolor sit amet, consectetur
      adipiscing elit. Sed porttitor neque at bibendum viverra. Duis aliquam nibh ut turpis gravida molestie. Nulla ac
      enim consectetur lacus condimentum facilisis. Duis eu scelerisque magna, in feugiat diam. Quisque non ex dui.
      Donec pellentesque arcu id arcu dignissim, quis pharetra dolor semper. Aliquam est libero, luctus sed quam a,
      suscipit viverra turpis. Nam rhoncus enim a augue congue tincidunt. Vestibulum non&nbsp;maximus, lobortis velit
      non, sodales orci. Suspendisse dictum mattis dolor et convallis. Aliquam vel tincidunt leo. Praesent commodo ac
      ante ut maximus. Integer volutpat hendrerit erat, a mollis sem ullamcorper semper.</p>
    <p style="margin-left:0px;">Mauris at finibus sem. Vivamus sed massa at ante rutrum faucibus. Nam tempor magna et
      velit tincidunt facilisis. Mauris tincidunt elit mauris, id vehicula eros dapibus eget. Phasellus lacus sem,
      tincidunt quis dolor a, ornare rutrum leo. Quisque ullamcorper, lacus sit amet egestas laoreet, risus magna
      scelerisque eros, nec semper velit augue sit amet urna. Nullam a lacus odio. Donec finibus leo vitae turpis
      efficitur luctus. Nunc vulputate hendrerit mi, ac accumsan ex imperdiet eget. Suspendisse nec consequat sem. In
      sodales massa felis, tempor rhoncus magna consequat quis. In faucibus elit vulputate augue finibus, ac maximus
      dolor imperdiet. Suspendisse orci velit, dignissim non accumsan non, pretium ac purus.</p>
    <p style="margin-left:0px;">
      Quisque ullamcorper, lacus sit amet egestas laoreet, risus magna
      scelerisque eros, nec semper velit augue sit amet urna. Nullam a lacus odio. Donec finibus leo vitae turpis
      efficitur luctus. Nunc vulputate hendrerit mi, ac accumsan ex imperdiet eget. Suspendisse nec consequat sem. In
      sodales massa felis, tempor rhoncus magna consequat quis. In faucibus elit
    </p>
  </div>
  <button id="new-comment">Insert new</button>
  <script src="../build/ckeditor.js"></script>
  <script>
    CKEDITOR.InlineEditor.create(document.querySelector("#editor"), {
      docflowImageUpload: {
        directUploadsPath:
          "http://localhost:3000/rails/active_storage/direct_uploads",
      },
      docflowPlaceholder: {
        formComponent: null,
        formComponentProps: {},
        variableLabels: {},
      },
      docflowSmartfield: {
        enabled: true,
        renderSmartfield: (props, domElement) => {
          const smartfield = document.createElement('span');
          smartfield.innerHTML = props.name;
          smartfield.style.border = '1px solid red';
          domElement.appendChild(smartfield);
        },
        onInvalidSmartfieldName: (name) => {
          console.log('Invalid smartfield name: ', name);
        },
      },
    })
      .then(editor => {
        window.editor = editor;
      })
      .catch(err => {
        console.error(err.stack);
      });

    document.querySelector("#new-comment").addEventListener("click", () => {
      window.editor.execute("insertComment", {
        id: "deneme-comment",
        rootName: "main"
      })
    });
  </script>
</body>

</html>
